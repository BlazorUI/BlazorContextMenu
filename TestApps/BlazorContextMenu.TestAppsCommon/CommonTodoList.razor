@inject IJSRuntime jsRuntime

<h1>Todo List (Right click)</h1>
<ul id="list1">
    @foreach (var item in TodoItems)
    {
        <ContextMenuTrigger Data="item" WrapperTag="li" MenuId="todoItemsMenu" Id="@($"list1-{TodoItems.IndexOf(item)}")">
            <input type="checkbox" @bind="item.IsChecked" readonly /> @item.Text
        </ContextMenuTrigger>
    }
</ul>

<h1>Todo List (Left click)</h1>
<ul id="list2">
    @foreach (var item in TodoItems)
    {
        <ContextMenuTrigger MouseButtonTrigger="MouseButtonTrigger.Left" Data="item" WrapperTag="li" MenuId="todoItemsMenu" Id="@($"list2-{TodoItems.IndexOf(item)}")">
            <input type="checkbox" @bind="item.IsChecked" readonly /> @item.Text
        </ContextMenuTrigger>
    }
</ul>

<ContextMenu Id="todoItemsMenu" OnAppearing="@TodoItemsMenuOnAppearing">
    <Item id="menuitem-copy" OnClick="CopyClick"> <i class="fas fa-file blue-icon"></i> Copy</Item>
    <Item id="menuitem-check" OnClick="CheckClick" OnAppearing="CheckAppearingHandler"> <i class="fas fa-file blue-icon"></i> Check</Item>
    <Item id="menuitem-delete" OnClick="DeleteClick" OnAppearing="DeleteAppearingHandler"> <i class="fas fa-trash-alt red-icon"></i> Delete</Item>
    <Item id="menuitem-invisible" Visible="false">I am invisible</Item>
</ContextMenu>

@code{

    void TodoItemsMenuOnAppearing(MenuAppearingEventArgs e)
    {
        var currentTodoItem = e.ContextMenuTrigger.Data as TodoItem;
        e.PreventShow = !currentTodoItem.CanShowMenu;
    }

    void CopyClick(ItemClickEventArgs e)
    {
        var currentTodoItem = e.ContextMenuTrigger.Data as TodoItem;
        TodoItems.Add(new TodoItem
        {
            Text = currentTodoItem.Text + " Copy",
            IsChecked = currentTodoItem.IsChecked,
            CanBeDeleted = currentTodoItem.CanBeDeleted
        });
        StateHasChanged();
    }

    void CheckAppearingHandler(ItemAppearingEventArgs e)
    {
        var currentTodoItem = e.ContextMenuTrigger.Data as TodoItem;
        e.IsEnabled = !currentTodoItem.IsChecked;
    }

    void DeleteAppearingHandler(ItemAppearingEventArgs e)
    {

        var currentTodoItem = e.ContextMenuTrigger.Data as TodoItem;
        e.IsVisible = currentTodoItem.CanBeDeleted;
    }


    void CheckClick(ItemClickEventArgs e)
    {
        var currentTodoItem = e.ContextMenuTrigger.Data as TodoItem;
        currentTodoItem.IsChecked = true;
        StateHasChanged();
    }

    void DeleteClick(ItemClickEventArgs e)
    {

        var currentTodoItem = e.ContextMenuTrigger.Data as TodoItem;
        TodoItems.Remove(currentTodoItem);
        StateHasChanged();
    }

    List<TodoItem> TodoItems = new List<TodoItem>
    {
        new TodoItem
        {
            Text = "Item 1",
            IsChecked = true
        },
        new TodoItem
        {
            Text="Item 2"
        },
        new TodoItem
        {
            Text="Item 3 (Cannot be deleted)",
            CanBeDeleted = false
        },
         new TodoItem
        {
            Text="Item 4 (Does not show the menu)",
            CanShowMenu = false
        }
    };

    class TodoItem
    {
        public string Text { get; set; }
        public bool IsChecked { get; set; }
        public bool CanBeDeleted { get; set; } = true;
        public bool CanShowMenu { get; set; } = true;
    }

}